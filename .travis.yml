language: php
php:
  - 7.4
service:
  - mysql
before_script:
  - composer install --prefer-dist --no-scripts -o
  - composer dump-autoload
  - cp .env.travis .env
  - php artisan jwt:generate
  - php artisan key:generate
  - php artisan vendor:publish
  - mysql -e 'CREATE DATABASE IF NOT EXISTS canal ;'
  - php artisan migrate
  - php artisan db:seed
script: phpunit
